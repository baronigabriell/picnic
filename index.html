<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Fleur+De+Leah&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <title>Lista de Itens - Amigas</title>
  <style>
    body {
      font-family: poppins, sans-serif;
      background-image: url(imagemjpg.jpg);
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      margin: 0;
    }

    header {
      background-color: rgba(0, 0, 0, 0.512);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 15vh;
      border-bottom: 2px solid white;
    }

    h1 {
      text-align: center;
      color: #ededed;
      margin-top: 70px;
    }

    .form-container {
      text-align: center;
      margin-bottom: 20px;
    }

    input,
    button {
      padding: 13px;
      font-size: 14px;
      margin: 5px;
      border-radius: 20px;
      border: none;
      font-family: poppins;
      outline: none;
    }

    #adicionar{
      background-color: #ededed;
    }

    #adicionar:hover{
      background-color: #71ae4b;
      transition: all 0.3s ease-in-out;
    }

    #adicionar:not(:hover){
      transition: all 0.3s ease-in-out;
      background-color: #ededed;
    }

    .list-container {
      margin-top: 30px;
      background-color: rgba(0, 0, 0, 0.512);
      padding: 30px;
      border-radius: 50px;
      color: white;
      margin-left: 30px;
      margin-right: 30px;
    }

    .item { 
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .item:not(:last-child) {
      border-bottom: 2px solid #ddd; /* Ajuste a cor e espessura da borda conforme necessário */
      padding-bottom: 10px; /* Espaço entre o texto e a borda */
    }

    .item p {
      margin: 0;
      font-size: 15px;
    }

    .delete-btn {
      background-color: #ff4d4d;
      border: none;
      color: white;
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 4px;
      width: 100px;
    }

    .delete-btn:hover {
      background-color: #e60000;
    }

 /* From Uiverse.io by philipo30 */ 
.delete-button {
  position: relative;
  padding: 0.5em;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 1em;
  transition: transform 0.2s ease;
}

.trash-svg {
  width: 2em;
  height: 2em;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  overflow: visible;
}

#lid-group {
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.delete-button:hover #lid-group {
  transform: rotate(-28deg) translateY(2px);
}

.delete-button:active #lid-group {
  transform: rotate(-12deg) scale(0.98);
}

.delete-button:hover .trash-svg {
  transform: scale(1.08) rotate(3deg);
}

.delete-button:active .trash-svg {
  transform: scale(0.96) rotate(-1deg);
}


  </style>
</head>

<header>
  <p style="font-family: fleur de leah; color: white; font-size: 30px; margin: 0;">With migas again</p>
</header>

<body>

  <h1>O que vamos levar?</h1>

  <div class="form-container">
    <input type="text" id="name" placeholder="Seu nome" required />
    <input type="text" id="item" placeholder="O que vai levar" required />
    <button onclick="addItem()" id="adicionar">Adicionar</button>
  </div>

  <div class="list-container">
    <h3>Itens já adicionados:</h3>
    <div id="items-list"></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
    import {
      getDatabase,
      ref,
      push,
      onValue,
      remove
    } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyALM9Uj33s4UjrBZ_iiLvx02sbBjOlAFdA",
      authDomain: "picnic-3c424.firebaseapp.com",
      projectId: "picnic-3c424",
      storageBucket: "picnic-3c424.firebasestorage.app",
      messagingSenderId: "411512961320",
      appId: "1:411512961320:web:c726adbfd383190250381d",
      measurementId: "G-ZZ55XYTGYQ"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    // Carrega os itens da base de dados
    function loadItems() {
      const itemsRef = ref(database, 'items');
      onValue(itemsRef, (snapshot) => {
        const items = snapshot.val() || {};
        const listContainer = document.getElementById('items-list');
        listContainer.innerHTML = '';

        for (const id in items) {
          const item = items[id];

//onclick="deleteItem('${id}')"

          const itemElement = document.createElement('div');
          itemElement.classList.add('item');
          itemElement.innerHTML = `
            <p><strong>${item.name}</strong> vai levar <em>${item.item}</em></p>

          <button aria-label="Delete item" class="delete-button" onclick="deleteItem('${id}')">
            <svg
              class="trash-svg"
              viewBox="0 -10 64 74"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="trash-can">
                <rect
                  x="16"
                  y="24"
                  width="32"
                  height="30"
                  rx="3"
                  ry="3"
                  fill="#e74c3c"
                ></rect>

                <g transform-origin="12 18" id="lid-group">
                  <rect
                    x="12"
                    y="12"
                    width="40"
                    height="6"
                    rx="2"
                    ry="2"
                    fill="#c0392b"
                  ></rect>
                  <rect
                    x="26"
                    y="8"
                    width="12"
                    height="4"
                    rx="2"
                    ry="2"
                    fill="#c0392b"
                  ></rect>
                </g>
              </g>
            </svg>
          </button>
          `;
          listContainer.appendChild(itemElement);
        }
      });
    }
    // onclick="deleteItem('${id}')"
    // Adiciona novo item
    function addItem() {
      const name = document.getElementById('name').value;
      const item = document.getElementById('item').value;

      if (!name || !item) {
        alert('Preencha todos os campos!');
        return;
      }

      const newItem = { name, item };
      const itemsRef = ref(database, 'items');
      push(itemsRef, newItem);

      document.getElementById('name').value = '';
      document.getElementById('item').value = '';
    }

    // Deleta item do banco de dados
    window.deleteItem = function (id) {
      const itemRef = ref(database, 'items/' + id);
      remove(itemRef);
    }

    // Carrega ao abrir a página
    window.addItem = addItem;
    window.addEventListener('load', loadItems);
  </script>

</body>

</html>